# ダッシュボードの投稿表示ロジックに関する調査報告

**2026年2月7日**

**著者: Manus AI**

## 1. はじめに

本レポートは、縦型ショート動画分析ツール「tategatashort-analytics.com」のダッシュボードに表示される投稿のデータ収集および表示ロジックについて調査し、その仕組みを明確にすることを目的とします。

## 2. 調査結果の概要

ダッシュボードに表示される投稿は、**特定の「業種」に紐づく「ハッシュタグ」を検索して収集された、国内の公開投稿**です。収集された投稿の中から、**投稿日が「前日から1か月前まで」**のものが表示対象となります。表示される投稿は、必ずしもランキング上位の投稿だけではなく、指定されたハッシュタグを含む投稿が広く収集されます。

以下に、データ収集から表示までの詳細なロジックを解説します。

## 3. データ収集ロジック

データ収集は、主にVercelのCron Jobによって毎日午前9時（日本時間）に自動実行されるバッチ処理と、ユーザーが手動で実行する2つの方法で行われます。どちらの場合も、外部のデータ収集サービスである**Apify**を利用して、TikTok、YouTube、Instagramから動画データを収集しています。

### 3.1. 収集の起点

データ収集の起点は、システムに登録されている**「業種」**と、各業種に紐づけられた**「ハッシュタグ」**です。

例えば、「フィットネス」という業種には、「#フィットネス」「#筋トレ」「#ダイエット」などのハッシュタグが登録されています。データ収集が実行されると、これらのハッシュタグを検索クエリとして使用し、各プラットフォームから関連する動画を収集します。

### 3.2. プラットフォーム別収集ロジック

プラットフォームごとに異なるApifyのアクター（収集プログラム）が使用されます。

| プラットフォーム | Apifyアクター | 収集対象 | 備考 |
| :--- | :--- | :--- | :--- |
| **TikTok** | `clockworks/tiktok-hashtag-scraper` | 指定ハッシュタグを含む動画 | - |
| **YouTube** | `streamers/youtube-scraper` | 指定ハッシュタグを検索キーワードとして動画を検索 | 収集後、URLに`/shorts/`が含まれる、または動画尺が60秒以下の「Shorts動画」のみをフィルタリング |
| **Instagram** | `apify/instagram-hashtag-scraper` | 指定ハッシュタグを含む「リール動画」 | `resultsType: "reels"` オプションでリール動画のみを対象 |

### 3.3. 収集の自動化

`/api/cron/daily-update` というAPIが毎日午前9時に実行され、登録されている**すべての業種**に対して、TikTok、YouTube、Instagramのデータ収集を自動的に行います。これにより、データが毎日更新されます。

## 4. データ処理・加工ロジック

収集された動画データは、そのままでは分析に利用しにくいため、データベースに保存された後、キーワードルールに基づいた**自動タグ付け**処理が行われます。

### 4.1. 自動タグ付け

`/api/videos/auto-tag` APIが、動画のタイトルや説明文、ハッシュタグに含まれるキーワードを基に、以下のカテゴリでタグを付与します。

- **コンテンツタイプ**: チュートリアル、レビュー、Vlogなど
- **フックタイプ**: 質問形式、衝撃的事実、ビフォーアフターなど
- **演者タイプ**: 顔出し、顔なし、テキストのみなど
- **トーン**: カジュアル、プロフェッショナル、ユーモアなど
- **CTAタイプ**: フォロー促進、いいね促進、リンク誘導など
- **動画尺カテゴリ**: 〜15秒、〜30秒、〜60秒、60秒以上

このタグ付けにより、ダッシュボードでの多角的な分析が可能になります。

## 5. 表示ロジック

ダッシュボードの表示は、`/api/dashboard` APIが担っています。

### 5.1. フィルタリング

ユーザーがダッシュボードでプラットフォーム（TikTok/YouTube/Instagram）や業種を選択すると、APIは以下の条件でデータベースから動画を絞り込みます。

1.  **プラットフォーム**: 選択されたプラットフォームに一致する動画
2.  **業種**: 選択された業種に紐づく動画（自動タグ付けされた業種IDでフィルタリング）
3.  **投稿期間**: **実行日の前日から遡って1か月以内**に投稿された動画

### 5.2. 集計とランキング

絞り込まれた動画データは、以下の通り集計・ランキング化されてフロントエンドに返却されます。

- **KPI**: 総動画数、総再生数、平均エンゲージメント率などの主要指標
- **グラフデータ**: コンテンツタイプ別、フックタイプ別、動画尺別の投稿数や再生数
- **日別トレンド**: 投稿数、再生数、エンゲージメント率の推移
- **トップ動画**: 「再生数」と「エンゲージメント率」それぞれのトップ10動画

### 5.3. 表示内容

以上の結果から、ダッシュボードには**「選択した業種に関連し、かつ直近1か月に投稿された、特定のハッシュタグを持つ国内の公開動画」**が表示されていると結論付けられます。表示されるのは必ずしもランキング上位の動画だけでなく、条件に合致した動画群全体の分析結果となります。

## 6. 結論

本ツールのダッシュボードは、特定のハッシュタグを軸に各プラットフォームから広くデータを収集し、それを自動でタグ付け・分析することで、ユーザーに多角的なインサイトを提供しています。表示される投稿は、特定のランキング結果ではなく、**「指定した業界の直近1か月のトレンドを反映した動画群」**と理解するのが最も正確です。
